#include <stdio.h>

//校验和取反之后再加0xAA
unsigned char sum8(unsigned char *A, unsigned char n)
{
  unsigned char i;
  unsigned char checksum = 0;
  for(i = 0; i< sizeof(A); i++)
  {
    checksum += A[i];
  }
  checksum = ~checksum + 0xAA;
  return checksum;
}

int main()
{
  char buf[]={0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64};
  printf("%s\n", buf);

  unsigned char A68[] = {0xD6,0xC2,0xD4,0xB6,0x02,0x70,0x68};
  unsigned char A54[] = {0xD6,0xC2,0xD4,0xB6,0x02,0x40,0x54};
  unsigned char checksum = 0;

  checksum = sum8(A68, 7);
  //printf("A68=%d\n", checksum);
  printf("A68=%x\n", checksum);

  checksum = sum8(A54, 7);
  //printf("A54=%d\n", checksum);
  printf("A54=%x\n", checksum);

  unsigned char queryReq[] = {0xD6,0xC2,0xD4,0xB6,0x03,0x08,0x10,0x04};
  checksum = sum8(queryReq, 8);
  printf("queryReq=%x\n", checksum);

  unsigned char queryRsp[] = {0xD6,0xC2,0xD4,0xB6,0x16,0x80,0x05,0x06,0x28,0x37,0x07,0x16,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC8};
  checksum = sum8(queryRsp, 23);
  printf("query=%x\n", checksum);
}